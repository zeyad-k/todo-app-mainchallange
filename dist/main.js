(()=>{"use strict";const e=document.querySelector(".DarkThemeToggle"),t=document.querySelector(".App"),s=document.querySelector(".TaskInputBar__input"),i=document.querySelector(".TaskList__list"),n=document.querySelector(".AppFooter__Counter"),a=document.querySelector(".AppFooter__ClearCompleted"),l=document.querySelector(".AppFooter__ViewAll"),o=document.querySelector(".AppFooter__ViewActive"),c=document.querySelector(".AppFooter__ViewCompleted"),r=e=>{const t=localStorage.getItem(e);return!!t&&JSON.parse(t)},d=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},k=e=>{e?.length?(v(e),(()=>{document.querySelectorAll(".TaskInputBar__Delete").forEach(((e,t)=>{e.addEventListener("click",(e=>_(e,t)))})),document.querySelectorAll(".TaskList__checkbox").forEach(((e,t)=>{setTimeout((()=>{e.addEventListener("click",(e=>L(e,t))),e.addEventListener("keydown",(e=>"Enter"===e.key&&L(e,t)))}),0)})),document.querySelectorAll(".TaskList__TaskContent").forEach((e=>{e.addEventListener("dragstart",(()=>{setTimeout((()=>e.classList.add("dragging")),0)})),e.addEventListener("touchstart",(()=>{setTimeout((()=>e.classList.add("dragging")),0)})),e.addEventListener("dragend",(()=>{e.classList.remove("dragging")})),e.addEventListener("touchend",(()=>{e.classList.remove("dragging")}))}));const e=e=>{e.preventDefault();const t=i.querySelector(".dragging"),s=[...i.querySelectorAll(".TaskList__TaskContent:not(.dragging)")].find((t=>e.clientY<=t.offsetTop+t.offsetHeight/2));i.insertBefore(t,s)};i.addEventListener("dragover",e),i.addEventListener("dragenter",(e=>e.preventDefault())),i.addEventListener("drop",e)})()):p()},_=(e,t)=>{if(!confirm("هل أنت متأكد من حذف هذه المهمة؟"))return;const s=r("tasks");s.splice(t,1),d("tasks",s),k(s)},L=(e,t)=>{const s=r("tasks");e.currentTarget.classList.toggle("TaskList__taskContent--isActive"),s[t].isCompleted=!s[t].isCompleted,((e,t)=>{if(e[t].isCompleted){const s=e.splice(t,1)[0];e.push(s)}})(s,t),d("tasks",s),k(s)},m=()=>{const e=r("tasks").filter((e=>!e.isCompleted));d("tasks",e),k(e)},u=()=>{t.classList.toggle("App--isDark"),d("darkThemeFlag",t?.classList.contains("App--isDark"))},p=()=>{i.innerHTML="<li class='EmptyList  TaskList__TaskContent'>\n<p>   No tasks yet...</p>  </li>"},v=()=>{const e=r("tasks")||[],t=e.length;n.innerHTML=t.toString(),i.innerHTML="",e.forEach(((e,t)=>{const s=document.createElement("li");s.draggable=!0,s.className="TaskList__TaskContent animate__animated animate__fadeInDown "+(e.isCompleted?" TaskList__taskContent--isActive":""),s.innerHTML=((e,t)=>`\n<div class='TaskList__checkbox' tabindex="0" role="button">\n\n <input  \n  type="checkbox" ${e.isCompleted?"checked":""}\n  class="TaskList__checkboxImg"\n  id="checkbox${t}"\n/>\n<label for="checkbox${t}"></label>\n</div>\n\n<div class="TaskInputBar__form">\n    <p class="TaskInputBar__input">${e.value}</p>\n  </div>\n  <button class="TaskInputBar__Delete">\n    <img class="TaskInputBar__DeleteIcon" src="./images/icon-cross.svg" alt="Delete Icon" />\n  </button>\n`)(e,t),i.appendChild(s)}))};r("darkThemeFlag")&&u(),k(r("tasks")),e.addEventListener("click",u),s.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),(()=>{const e=s.value;if(!e||""===e.trim())return;const t={value:e,isCompleted:!1},i=r("tasks")||[];i.unshift(t),d("tasks",i),s.value="",k(i)})())})),a.addEventListener("click",m),l?.addEventListener("click",(()=>{i?.classList.remove("TaskList__list--showCompletedOnly","TaskList__list--hideCompleted"),l?.classList.add("TaskList__link--isActive"),o?.classList.remove("TaskList__link--isActive"),c?.classList.remove("TaskList__link--isActive")})),o?.addEventListener("click",(()=>{i?.classList.remove("TaskList__list--showCompletedOnly"),i?.classList.add("TaskList__list--hideCompleted"),o?.classList.add("TaskList__link--isActive"),l?.classList.remove("TaskList__link--isActive"),c?.classList.remove("TaskList__link--isActive")})),c?.addEventListener("click",(()=>{i?.classList.remove("TaskList__list--hideCompleted"),i?.classList.add("TaskList__list--showCompletedOnly"),c?.classList.add("TaskList__link--isActive"),l?.classList.remove("TaskList__link--isActive"),o?.classList.remove("TaskList__link--isActive")}))})();